{"filter":false,"title":"modals.js.coffee","tooltip":"/app/assets/javascripts/modals.js.coffee","undoManager":{"mark":0,"position":0,"stack":[[{"start":{"row":0,"column":0},"end":{"row":26,"column":11},"action":"remove","lines":["$ ->","  modal_holder_selector = '#modal-holder'","  modal_selector = '.modal'","","  $(document).on 'click', 'a[data-modal]', ->","    location = $(this).attr('href')","    #Load modal dialog from server","    $.get location, (data)->","      $(modal_holder_selector).html(data).","      find(modal_selector).modal()","    false","","  $(document).on 'ajax:success',","    'form[data-modal]', (event, data, status, xhr)->","      url = xhr.getResponseHeader('Location')","      if url","        # Redirect to url","        window.location = url","      else","        # Remove old modal backdrop","        $('.modal-backdrop').remove()","","        # Replace old modal with new one","        $(modal_holder_selector).html(data).","        find(modal_selector).modal()","","      false"],"id":2},{"start":{"row":0,"column":0},"end":{"row":19,"column":9},"action":"insert","lines":["$ ->","  modal_holder_selector = \"#modal-holder\"","","  $(document).on \"click\", \"[data-behavior='modal']\", ->","    $('body').modalmanager('loading')","    location = $(this).attr(\"href\")","    $.get location, (data)->","      $(modal_holder_selector).html(data).find(\".modal\").modal(\"show\")","    false","","  $(document).on \"ajax:success\", \"[data-behavior='modal-form']\", (event, data, status, xhr) ->","    # make sure this event is observered by document and not by dom node itself.","    url = xhr.getResponseHeader(\"Location\")","    # Navigates to given location header in http response or closes the modal handler.","    if url","      window.location = url","    else","      # FUTURE TODO: make sure only the modal which was called last will be destroyed.","      $(\".modal\").modal(\"hide\")","    false"]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":19,"column":9},"end":{"row":19,"column":9},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1507151724945,"hash":"98a181ca11c278eddd5b4ce4a35de796b71c25ab"}